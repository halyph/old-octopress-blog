---
layout: post
title: Equals, HashCode and toString in Java
date: '2013-05-20T23:19:00.004+03:00'
author: Orest Ivasiv
categories:
- java
modified_time: '2013-05-20T23:23:12.769+03:00'
thumbnail: http://3.bp.blogspot.com/-OcQd9aLAnoc/T2HQNCIz5hI/AAAAAAAAAgk/wynszvwrfzw/s72-c/1331810342_Java.png
blogger_id: tag:blogger.com,1999:blog-7372777165432727866.post-5772349572287122854
blogger_orig_url: http://www.halyph.com/2013/05/equals-hashcode-and-tostring-in-java.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-OcQd9aLAnoc/T2HQNCIz5hI/AAAAAAAAAgk/wynszvwrfzw/s1600/1331810342_Java.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-OcQd9aLAnoc/T2HQNCIz5hI/AAAAAAAAAgk/wynszvwrfzw/s1600/1331810342_Java.png" /></a></div>You probably know that <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29" target="_blank">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29" target="_blank">hashCode</a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29" target="_blank">toString </a>methods are very important in Java. And they must be carefully implemented. <i>Joshua Bloch</i> has written about this in his famous book "<a href="http://www.amazon.com/Effective-Java-2nd-Joshua-Bloch/dp/0321356683" target="_blank">Effective Java (2nd Edition)"</a>, items 8 and 9.<br /><br />Let's create simple bean object and implement the mentioned above methods:<br /><pre class="brush: java;">package org.halyph;<br /><br />import java.util.List;<br /><br />public class StandardBean {<br />    private String name;<br />    private int id;<br />    private List&lt;StandardBean&gt; references;<br /><br />    public String getName() {<br />        return name;<br />    }<br /><br />    public void setName(String name) {<br />        this.name = name;<br />    }<br /><br />    public int getId() {<br />        return id;<br />    }<br /><br />    public void setId(int id) {<br />        this.id = id;<br />    }<br /><br />    public List&lt;StandardBean&gt; getReferences() {<br />        return references;<br />    }<br /><br />    public void setReferences(List&lt;StandardBean&gt; references) {<br />        this.references = references;<br />    }<br /><br />    @Override<br />    public String toString() {<br />        return "StandardBean{" +<br />                "name='" + name + '\'' +<br />                ", id=" + id +<br />                ", references=" + references +<br />                "} " + super.toString();<br />    }<br /><br />    @Override<br />    public boolean equals(Object o) {<br />        if (this == o) return true;<br />        if (o == null || getClass() != o.getClass()) return false;<br /><br />        StandardBean that = (StandardBean) o;<br /><br />        if (id != that.id) return false;<br />        if (name != null ? !name.equals(that.name) : that.name != null) return false;<br />        if (references != null ? !references.equals(that.references) : that.references != null) return false;<br /><br />        return true;<br />    }<br /><br />    @Override<br />    public int hashCode() {<br />        int result = name != null ? name.hashCode() : 0;<br />        result = 31 * result + id;<br />        result = 31 * result + (references != null ? references.hashCode() : 0);<br />        return result;<br />    }<br />}<br /><br /></pre>These three methods (<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29" target="_blank">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29" target="_blank">hashCode</a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29" target="_blank">toString</a>) were generated by IDE. But, we have one drawback - their maintenance, i.e. we should carefully regenerate/update them. Also, readability is not very good. There are several alternative ways to solve this issue.<br /><br /><span style="font-size: large;">1. Apache Commons Lang </span><br /><pre class="brush: java;">import org.apache.commons.lang3.builder.EqualsBuilder;<br />import org.apache.commons.lang3.builder.HashCodeBuilder;<br />import org.apache.commons.lang3.builder.ToStringBuilder;<br /><br />public class ApacheCommonsBean {<br />    <br />    ...<br /><br />    @Override<br />    public String toString() {<br />        return new ToStringBuilder(this)<br />                .append("name", name)<br />                .append("id", id)<br />                .append("references", references)<br />                .toString();<br />    }<br /><br />    @Override<br />    public boolean equals(Object o) {<br />        if (this == o) return true;<br />        if (o == null || getClass() != o.getClass()) return false;<br /><br />        ApacheCommonsBean that = (ApacheCommonsBean) o;<br /><br />        return new EqualsBuilder()<br />                .appendSuper(super.equals(o))<br />                .append(name, that.name)<br />                .append(id, that.id)<br />                .append(references, that.references)<br />                .isEquals();<br />    }<br /><br />    @Override<br />    public int hashCode() {<br />        return new HashCodeBuilder(31, 17)<br />                .appendSuper(super.hashCode())<br />                .append(name)<br />                .append(id)<br />                .append(references)<br />                .toHashCode();<br />    }<br /><br />}<br /></pre><span style="font-size: large;">2. Google Guave </span><br /><pre class="brush: java;">import com.google.common.base.Objects;<br /><br />public class GuavaBean {<br /><br />    ...<br /><br />    @Override<br />    public String toString() {<br />        return Objects.toStringHelper(this)<br />                .add("name", name)<br />                .add("id", id)<br />                .add("references", references)<br />                .toString();<br />    }<br /><br />    @Override<br />    public boolean equals(Object o) {<br />        if (this == o) return true;<br />        if (o == null) return false;<br /><br />        if (o instanceof GuavaBean) {<br />            final GuavaBean other = (GuavaBean) o;<br />            return Objects.equal(name, other.name)<br />                    &amp;&amp; Objects.equal(id, other.id)<br />                    &amp;&amp; Objects.equal(references, other.references);<br />        }<br />        return false;<br />    }<br /><br />    @Override<br />    public int hashCode() {<br />        return Objects.hashCode(name, id, references);<br />    }<br /><br />}<br /></pre><span style="font-size: large;">3. Java 7 Utils </span><br /><pre class="brush: java;">import java.util.Objects;<br /><br />public class JavaSevenBean {<br />   <br />    ...<br /><br />    @Override<br />    public boolean equals(Object o) {<br />        if (this == o) return true;<br />        if (o == null || getClass() != o.getClass()) return false;<br /><br />        JavaSevenBean that = (JavaSevenBean) o;<br /><br />        return Objects.equals(name, that.name)<br />                &amp;&amp;  Objects.equals(id, that.id)<br />                &amp;&amp; Objects.equals(references, that.references);<br />    }<br /><br />    @Override<br />    public int hashCode() {<br />        return Objects.hash(name, id, references);<br />    }<br />}</pre><pre class="brush: java;">&nbsp;</pre><span style="font-size: large;">Summary</span><br /><br /><br />Both Apache Commons Lang and Google Guava are additional jars in you project. So, when should we use these libraries:<br /><ul><li>I prefer to avoid using additional libraries if I need only small amount of library functionality. I.e. don't add Apache Commons/Guava into your project if you need <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29" target="_blank">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29" target="_blank">hashCode</a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29" target="_blank">toString</a> only.</li><li>Use full power of existent projects libraries. Don't reinvent the wheel. Almost all mid-size project has Apache Commons or Guava (or both).</li><li>Use modern Java 7 feature if it's possible in your current environment.</li><li>I can't make preference between Guava and Apache Commons. Just stick to the current project state and select library which will be more useful. <i>Don't be dogmatic</i>. </li></ul>IDE generated <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29" target="_blank">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29" target="_blank">hashCode</a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29" target="_blank">toString</a> methods are not readable. And&nbsp; in general cases they are boilerplate and hard to maintain. It's very easy to forget re-generate/update them.<br /><br /><b>Links</b>:<br /><ul><li><a href="http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/builder/package-summary.html">Apache Commons Lang JavaDoc</a></li><ul><li><a href="http://www.java-tutorial.ch/core-java-tutorial/tostringbuilder-style">Apache Commons Lang ToStringBuilder Style</a></li><li><a href="http://www.java-tutorial.ch/core-java-tutorial/hashcode-and-equals">Apache Commons Lang Hashcode and Equals</a>&nbsp;</li><li><a href="http://www.java-tutorial.ch/core-java-tutorial/equalsbuilder">Apache Commons Lang Equalsbuilder</a>&nbsp;</li></ul><li><a href="http://code.google.com/p/guava-libraries/wiki/CommonObjectUtilitiesExplained">Guava Object common methods</a>&nbsp;</li><li><a href="http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html">Guava Objects JavaDoc</a></li><li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html">Java 7 Objects Util</a></li><ul><li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#equals%28java.lang.Object,%20java.lang.Object%29">equals</a></li><li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hash%28java.lang.Object...%29">hash</a></li></ul><li>GitHub repo <a href="https://github.com/halyph/equalsHashString">https://github.com/halyph/equalsHashString</a></li></ul>