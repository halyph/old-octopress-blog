
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Knowledge Is Everything</title>
  <meta name="author" content="Orest Ivasiv">

  
  <meta name="description" content="I&rsquo;ve been using Octopress on Mac OS X (i.e. have no problem). But, recently I&rsquo;ve decided to run my blog on Windows machine and felt pain &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://halyph.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Knowledge Is Everything" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-54626671-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <!-- <header role="banner"><hgroup>
  <h1><a href="/">Knowledge Is Everything</a></h1>
  
</hgroup>

</header> -->
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:halyph.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            Knowledge Is Everything
        </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About me</a></li>
  <li><a href="http://halyph.blogspot.com">Old Blog</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/17/how-to-install-octopress-on-windows/">How to Install Octopress on Windows?</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-17T18:53:27+02:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>6:53 pm</span></time>
        
           | <a href="/blog/2015/02/17/how-to-install-octopress-on-windows/#disqus_thread"
             data-disqus-identifier="http://halyph.com/blog/2015/02/17/how-to-install-octopress-on-windows/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="center" src="/images/blog/ruby.png"></p>

<p>I&rsquo;ve been using <a href="http://octopress.org/">Octopress</a> on Mac OS X (i.e. have no problem). But, recently I&rsquo;ve decided to run my blog on Windows machine and felt pain. Ahh, <a href="http://octopress.org/">Octopress</a> uses bunch of native extentions which actually cause a lot of cross-platform issues. My first attempt was to try <a href="http://jruby.org/">JRuby</a> due to his better Windows support, but got this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ bundle install
</span><span class='line'>Fetching gem metadata from https://rubygems.org/.........
</span><span class='line'>Installing rake (10.4.2)
</span><span class='line'>Installing RedCloth (4.2.9)
</span><span class='line'>Using blankslate (2.1.2.4)
</span><span class='line'>Installing hitimes (1.2.2)
</span><span class='line'>Installing timers (4.0.1)
</span><span class='line'>Installing celluloid (0.16.0)
</span><span class='line'>Installing chunky_png (1.3.3)
</span><span class='line'>Installing fast-stemmer (1.0.2) with native extensions
</span><span class='line'>Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
</span><span class='line'>.
</span><span class='line'>        D:/Tools/JRuby/jruby-1.7.0/bin/jruby.exe extconf.rb NotImplementedError: C extension support is not enabled. Pass -Xcext.enabled=true to JRuby or set JRUBY_OPTS or modify .jrubyrc to enable.
</span><span class='line'>
</span><span class='line'>   (root) at D:/Tools/JRuby/jruby-1.7.0/lib/ruby/shared/mkmf.rb:8  require at org/jruby/RubyKernel.java:1019
</span><span class='line'>   (root) at D:/Tools/JRuby/jruby-1.7.0/lib/ruby/shared/rubygems/custom_require.rb:1
</span><span class='line'>   (root) at extconf.rb:1
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Gem files will remain installed in D:/Tools/JRuby/jruby-1.7.0/lib/ruby/gems/shared/gems/fast-stemmer-1.0.2 for inspection.
</span><span class='line'>Results logged to D:/Tools/JRuby/jruby-1.7.0/lib/ruby/gems/shared/gems/fast-stemmer-1.0.2/ext/gem_make.out
</span><span class='line'>An error occurred while installing fast-stemmer (1.0.2), and Bundler cannot continue.
</span><span class='line'>Make sure that `gem install fast-stemmer -v '1.0.2'` succeeds before bundling.</span></code></pre></td></tr></table></div></figure>


<p>There is JRuby version of <code>fast-stemmer</code> gem called <a href="https://github.com/caius/jruby-stemmer"><code>jruby-stemmer</code></a>. But, I&rsquo;m not ready to maitain this. That&rsquo;s why I&rsquo;ve decided to use <a href="http://rubyinstaller.org/">RubyInstaller</a>.</p>

<h2>Install Ruby on Windows and SSL issues</h2>

<ol>
<li><p>Download (<code>rubyinstaller-2.1.5-x64.exe</code> in my case) and install <a href="http://rubyinstaller.org/">RubyInstaller</a>. I installed in <code>d:\Tools\Ruby\Ruby21-x64\</code> folder.</p></li>
<li><p>Check <code>rubygems</code> via running <code>gem update</code> and you should get the next error:</p></li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gem update
</span><span class='line'>Updating installed gems
</span><span class='line'>ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
</span><span class='line'>    SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/specs.4.8.gz)</span></code></pre></td></tr></table></div></figure>


<p>It&rsquo;s well known <code>rubygems</code> issues with ready to use <a href="https://gist.github.com/luislavena/f064211759ee0f806c88">solution</a>:</p>

<ul>
<li>Step 1: Obtain the new trust certificate, download it <a href="https://raw.githubusercontent.com/rubygems/rubygems/master/lib/rubygems/ssl_certs/AddTrustExternalCARoot-2048.pem">AddTrustExternalCARoot-2048.pem</a> in some temp folder</li>
<li>Step 2: Locate RubyGems certificate directory in your installation (in my case it&rsquo;s <code>D:/Tools/Ruby/Ruby21-x64/lib/ruby/2.1.0/</code> )</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gem which rubygems
</span><span class='line'>D:/Tools/Ruby/Ruby21-x64/lib/ruby/2.1.0/rubygems.rb</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Step 3: Copy new trust certificate into <code>D:\Tools\Ruby\Ruby21-x64\lib\ruby\2.1.0\rubygems\ssl_certs</code></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ copy AddTrustExternalCARoot-2048.pem D:\Tools\Ruby\Ruby21-x64\lib\ruby\2.1.0\rubygems\ssl_certs</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Step 4: Now You should be able to run gem update without any issues</li>
</ul>


<h2>Prepapre environment for Octopress</h2>

<p>Now it&rsquo;s time to clone <a href="http://octopress.org/">Octopress</a> blog and run it. Unfortunatelly, there are some minor issues which still must be fixed.</p>

<h3>Fix <a href="http://octopress.org/">Octopress</a> native extentions issues</h3>

<p>We know that <a href="http://octopress.org/">Octopress</a> uses native extentions thats why we have to additionally install <a href="http://cdn.rubyinstaller.org/archives/devkits/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe">Development Kit</a></p>

<ul>
<li>Download and unpack it in adjacent to Ruby install folder (<code>d:\Tools\Ruby\DevKit_2.1_x64\</code> in my case)</li>
<li>Link <a href="http://cdn.rubyinstaller.org/archives/devkits/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe">Development Kit</a> installation to previously installed Ruby

<ul>
<li>Go to <a href="http://cdn.rubyinstaller.org/archives/devkits/DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe">Development Kit</a> install folder <code>d:\Tools\Ruby\DevKit_2.1_x64\</code></li>
<li>Run <code>ruby dk.rb init</code> which generate <code>config.yml</code>. Open <code>config.yml</code> and add <code>- D:/Tools/Ruby/Ruby21-x64</code> to the end of this file.</li>
<li>Run <code>ruby dk.rb install</code></li>
</ul>
</li>
</ul>


<p>See my <em>Development Kit</em> <code>config.yml</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># This configuration file contains the absolute path locations of all
</span><span class='line'># installed Rubies to be enhanced to work with the DevKit. This config
</span><span class='line'># file is generated by the 'ruby dk.rb init' step and may be modified
</span><span class='line'># before running the 'ruby dk.rb install' step. To include any installed
</span><span class='line'># Rubies that were not automagically discovered, simply add a line below
</span><span class='line'># the triple hyphens with the absolute path to the Ruby root directory.
</span><span class='line'>#
</span><span class='line'># Example:
</span><span class='line'>#
</span><span class='line'># ---
</span><span class='line'># - C:/ruby19trunk
</span><span class='line'># - C:/ruby192dev
</span><span class='line'>#
</span><span class='line'>---
</span><span class='line'>- D:/Tools/Ruby/Ruby21-x64</span></code></pre></td></tr></table></div></figure>


<h3>Install Python</h3>

<p>The default syntax highlighting engine in Octopress/Jekyll is <a href="http://pygments.org/">Pygments</a>. It&rsquo;s requires Python v.2.7.x. Simply download <a href="https://www.python.org/downloads/release/python-278/">Python v.2.7.8</a> and add it on system <code>PATH</code>.</p>

<h3>Final steps</h3>

<p>I assume that blog was previously cloned. Now, we should perform &ldquo;traditional&rdquo; Ruby project ceremony:</p>

<ul>
<li>Install <code>budler</code> via <code>gem install bundler</code></li>
<li>Setup all required gems <code>bundle install</code></li>
<li>Run <a href="http://octopress.org/">Octopress</a> preview <code>rake preview</code></li>
</ul>


<h2>References</h2>

<ul>
<li><a href="http://blog.zerosharp.com/setting-up-octopress-on-windows/">Octopress on Windows and GitHub</a></li>
<li><a href="http://thaiat.github.io/blog/2014/03/13/how-to-install-and-use-octopress-on-windows/">How to Install and Use Octopress on Windows</a></li>
<li><a href="http://octopress.org/">Octopress</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/13/maven-flow-for-simple-app-creation/">Maven Flow for Simple App Creation</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-13T00:18:30+02:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>12:18 am</span></time>
        
           | <a href="/blog/2015/02/13/maven-flow-for-simple-app-creation/#disqus_thread"
             data-disqus-identifier="http://halyph.com/blog/2015/02/13/maven-flow-for-simple-app-creation/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="center" src="/images/blog/java.png"></p>

<p>I provided my reflections about <em>&ldquo;Java for Everything&rdquo;</em> in the previous <a href="/blog/2015/02/13/do-we-need-java-for-everything">post</a>.
Here we will review other implementation of this concept.</p>

<p>I have the next concerns about any Java application (big or small):</p>

<ul>
<li>library dependency management must be simple</li>
<li>it&rsquo;s very bad practice to distribute sources along with libraries (dependency management tools must be used instead: Ivy, Maven, Gradle, etc.)</li>
<li>small application might have a little bit different project layout (not equals to traditional Maven layout)</li>
<li>we should be able to setup IDE (in my case <a href="https://www.jetbrains.com/idea/">Intellij IDEA</a>) as quick a possible. I hate editing Java programs in plain text editor</li>
<li>it must be a convenient way to run Java application with different arguments in <em>production</em> and <em>development</em> modes</li>
</ul>


<h2>Use Case</h2>

<p>We have to create simple and small REST application based on <a href="https://github.com/perwendel/spark">Spark Java framework</a> (A Sinatra inspired framework for Java).</p>

<p>Here is the source:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">static</span> <span class="n">spark</span><span class="o">.</span><span class="na">Spark</span><span class="o">.</span><span class="na">get</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">static</span> <span class="n">spark</span><span class="o">.</span><span class="na">SparkBase</span><span class="o">.</span><span class="na">port</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span> <span class="o">)</span> <span class="kd">throws</span> <span class="n">NumberFormatException</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="nl">arg:</span> <span class="n">args</span><span class="o">)</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;&gt; %s&quot;</span><span class="o">,</span> <span class="n">arg</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">get</span><span class="o">(</span><span class="s">&quot;/hello&quot;</span><span class="o">,</span> <span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&quot;Hello World!&quot;</span><span class="o">;</span>
</span><span class='line'>        <span class="o">});</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So, here is the list of issues:</p>

<ul>
<li>get Spark dependency with all transitive dependencies</li>
<li>pass command-line arguments into the app</li>
<li>use this application in development mode and in &ldquo;production&rdquo; (packed in jar)</li>
</ul>


<h2>Traditional Maven Way</h2>

<ul>
<li>Generate empty project via Maven archetype</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mvn archetype:generate <span class="se">\</span>
</span><span class='line'>-DgroupId<span class="o">=</span>com.halyph <span class="se">\ </span>
</span><span class='line'>-DartifactId<span class="o">=</span>sparkblog <span class="se">\ </span>
</span><span class='line'>-Dpackage<span class="o">=</span>com.halyph.blog <span class="se">\ </span>
</span><span class='line'>-Dversion<span class="o">=</span>1.0-SNAPSHOT <span class="se">\</span>
</span><span class='line'>-DarchetypeGroupId<span class="o">=</span>org.apache.maven.archetypes <span class="se">\ </span>
</span><span class='line'>-DarchetypeArtifactId<span class="o">=</span>maven-archetype-quickstart <span class="se">\</span>
</span><span class='line'>-DinteractiveMode<span class="o">=</span><span class="nb">false</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>Open this in IDEA (I don&rsquo;t use other IDEs) via &ldquo;Open File or Project&rdquo; and select folder with generated <strong>pom.xml</strong> file. We don&rsquo;t need tests, so we can delete <em>src->test</em> folder and remove junit dependency from <strong>pom.xml</strong> file. Now, we can easily run our application via IDE.</p></li>
<li><p>Add Spark framework dependency to <strong>pom.xml</strong> and update our <strong>App</strong> class</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
</span><span class='line'>         <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;groupId&gt;</span>com.halyph<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>  <span class="nt">&lt;artifactId&gt;</span>sparkblog<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>  <span class="nt">&lt;version&gt;</span>1.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>  <span class="nt">&lt;packaging&gt;</span>jar<span class="nt">&lt;/packaging&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;name&gt;</span>sparkblog<span class="nt">&lt;/name&gt;</span>
</span><span class='line'>  <span class="nt">&lt;url&gt;</span>http://maven.apache.org<span class="nt">&lt;/url&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;properties&gt;</span>
</span><span class='line'>    <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/properties&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;dependencies&gt;</span>
</span><span class='line'>    <span class="nt">&lt;dependency&gt;</span>
</span><span class='line'>      <span class="nt">&lt;groupId&gt;</span>com.sparkjava<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>      <span class="nt">&lt;artifactId&gt;</span>spark-core<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>      <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/dependency&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/dependencies&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;build&gt;</span>
</span><span class='line'>    <span class="nt">&lt;plugins&gt;</span>
</span><span class='line'>      <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;version&gt;</span>3.1<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>          <span class="nt">&lt;target&gt;</span>1.8<span class="nt">&lt;/target&gt;</span>
</span><span class='line'>          <span class="nt">&lt;source&gt;</span>1.8<span class="nt">&lt;/source&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/plugins&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/build&gt;</span>
</span><span class='line'><span class="nt">&lt;/project&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">halyph</span><span class="o">.</span><span class="na">blog</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">static</span> <span class="n">spark</span><span class="o">.</span><span class="na">Spark</span><span class="o">.</span><span class="na">get</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">NumberFormatException</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">String</span> <span class="n">myArgs</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
</span><span class='line'>        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">arg</span> <span class="o">:</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;&gt; %s&quot;</span><span class="o">,</span> <span class="n">arg</span><span class="o">);</span>
</span><span class='line'>            <span class="n">myArgs</span> <span class="o">+=</span> <span class="n">arg</span> <span class="o">+</span> <span class="s">&quot; : &quot;</span><span class="o">;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
</span><span class='line'>        <span class="kd">final</span> <span class="n">String</span> <span class="n">finalMyArgs</span> <span class="o">=</span> <span class="n">myArgs</span><span class="o">;</span>
</span><span class='line'>        <span class="n">get</span><span class="o">(</span><span class="s">&quot;/hello&quot;</span><span class="o">,</span> <span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="s">&quot;Hello World!\n args = &quot;</span> <span class="o">+</span> <span class="n">finalMyArgs</span><span class="o">;</span>
</span><span class='line'>        <span class="o">});</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This application can be easily run via IDE, but lets run it via Maven</p>

<ul>
<li>We should use <a href="http://mojo.codehaus.org/exec-maven-plugin/usage.html">Exec Maven Plugin</a> to run the app with all dependencies</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mvn clean compile <span class="nb">exec</span>:java -Dexec.mainClass<span class="o">=</span><span class="s2">&quot;com.halyph.blog.App&quot;</span>  -Dexec.args<span class="o">=</span><span class="s2">&quot;9090 one 1 2&quot;</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Scanning <span class="k">for</span> projects...
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Building sparkblog 1.0-SNAPSHOT
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> --- maven-clean-plugin:2.4.1:clean <span class="o">(</span>default-clean<span class="o">)</span> @ sparkblog ---
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Deleting d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> --- maven-resources-plugin:2.5:resources <span class="o">(</span>default-resources<span class="o">)</span> @ sparkblog ---
</span><span class='line'><span class="o">[</span>debug<span class="o">]</span> execute contextualize
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Using <span class="s1">&#39;UTF-8&#39;</span> encoding to copy filtered resources.
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> skip non existing resourceDirectory d:<span class="se">\M</span>yProjects<span class="se">\s</span>parkblog<span class="se">\s</span>rc<span class="se">\m</span>ain<span class="se">\r</span>esources
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> --- maven-compiler-plugin:3.1:compile <span class="o">(</span>default-compile<span class="o">)</span> @ sparkblog ---
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Changes detected - recompiling the module!
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Compiling <span class="m">1</span> <span class="nb">source </span>file to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\c</span>lasses
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> &gt;&gt;&gt; <span class="nb">exec</span>-maven-plugin:1.2.1:java <span class="o">(</span>default-cli<span class="o">)</span> @ sparkblog &gt;&gt;&gt;
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> <span class="o">&lt;&lt;&lt;</span> <span class="nb">exec</span>-maven-plugin:1.2.1:java <span class="o">(</span>default-cli<span class="o">)</span> @ sparkblog <span class="o">&lt;&lt;&lt;</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> --- <span class="nb">exec</span>-maven-plugin:1.2.1:java <span class="o">(</span>default-cli<span class="o">)</span> @ sparkblog ---
</span><span class='line'>&gt; 9090&gt; one&gt; 1&gt; 2
</span><span class='line'><span class="o">[</span>Thread-1<span class="o">]</span> INFO spark.webserver.SparkServer - <span class="o">==</span> Spark has ignited ...
</span><span class='line'><span class="o">[</span>Thread-1<span class="o">]</span> INFO spark.webserver.SparkServer - &gt;&gt; Listening on 0.0.0.0:4567
</span><span class='line'><span class="o">[</span>Thread-1<span class="o">]</span> INFO org.eclipse.jetty.server.Server - jetty-9.0.2.v20130417
</span><span class='line'><span class="o">[</span>Thread-1<span class="o">]</span> INFO org.eclipse.jetty.server.ServerConnector - Started ServerConnector@4afe75c9<span class="o">{</span>HTTP/1.1<span class="o">}{</span>0.0.0.0:4567<span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>In case the application run configurations is persistent (&ldquo;main&rdquo; class and CLI arguments are changing rarely) we can configure it in <strong>pom.xml</strong>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'> <span class="nt">&lt;build&gt;</span>
</span><span class='line'>    <span class="nt">&lt;plugins&gt;</span>
</span><span class='line'>      ...
</span><span class='line'>      <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;artifactId&gt;</span>exec-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;version&gt;</span>1.3.2<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="nt">&lt;executions&gt;</span>
</span><span class='line'>          <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>            <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>              <span class="nt">&lt;goal&gt;</span>java<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/executions&gt;</span>
</span><span class='line'>        <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>          <span class="nt">&lt;mainClass&gt;</span>com.halyph.blog.App<span class="nt">&lt;/mainClass&gt;</span>
</span><span class='line'>          <span class="nt">&lt;arguments&gt;</span>
</span><span class='line'>            <span class="nt">&lt;argument&gt;</span>9090<span class="nt">&lt;/argument&gt;</span>
</span><span class='line'>            <span class="nt">&lt;argument&gt;</span>one<span class="nt">&lt;/argument&gt;</span>
</span><span class='line'>            <span class="nt">&lt;argument&gt;</span>1<span class="nt">&lt;/argument&gt;</span>
</span><span class='line'>            <span class="nt">&lt;argument&gt;</span>2<span class="nt">&lt;/argument&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/arguments&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/plugins&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/build&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>It&rsquo;s nice idea to use <code>mvn exec:java</code>, but it might be a little bit slow. So, we might decide to use some shell script which increase compiled application ramp up time. The problem is that the application have dependencies (which have transitive dependencies). I.e. <code>java</code> classpath have to be configured somehow.</li>
</ul>


<p>Well, I borrowed the ideas from &ldquo;<a href="http://saltnlight5.blogspot.com/2012/08/a-better-java-shell-script-wrapper.html">A better java shell script wrapper</a>&rdquo; script. Here it is:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Copyright 2012 Zemian Deng</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># A wrapper script that run any Java application in unix/cygwin bash env.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># This script is assumed to be located in an application&#39;s &quot;bin&quot; directory. It will</span>
</span><span class='line'><span class="c"># auto resolve its directory location relative to the application path (which is one</span>
</span><span class='line'><span class="c"># parent up from the script.) Therefore, this script can be run any where in the file</span>
</span><span class='line'><span class="c"># system and it will still reference the same application directory.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># This script will by default auto setup a Java classpath that picks up any &quot;config&quot;</span>
</span><span class='line'><span class="c"># and &quot;lib&quot; directories under the application directory. It also will also add a</span>
</span><span class='line'><span class="c"># any typical Maven project output directories such as &quot;target/test-classes&quot;,</span>
</span><span class='line'><span class="c"># &quot;target/classes&quot;, and &quot;target/dependency&quot; into classpath. This can be disable by</span>
</span><span class='line'><span class="c"># setting RUN_JAVA_NO_AUTOCP=1.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># If the &quot;Default parameters&quot; section bellow doesn&#39;t match to user&#39;s env, then user</span>
</span><span class='line'><span class="c"># may override these variables in their terminal session or preset them in shell&#39;s</span>
</span><span class='line'><span class="c"># profile startup script. The values of all path should be in cygwin/unix path,</span>
</span><span class='line'><span class="c"># and this script will auto convert them into Windows path where is needed.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># User may customize the Java classpath by setting RUN_JAVA_CP, which will prefix to existing</span>
</span><span class='line'><span class="c"># classpath, or use the &quot;-cp&quot; option, which will postfix to existing classpath.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Usage:</span>
</span><span class='line'><span class="c">#   run-java [java_opts] &lt;java_main_class&gt; [-cp /more/classpath] [-Dsysprop=value]</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Example:</span>
</span><span class='line'><span class="c">#   run-java example.Hello</span>
</span><span class='line'><span class="c">#   run-java example.Hello -Dname=World</span>
</span><span class='line'><span class="c">#   run-java org.junit.runner.JUnitCore example.HelloTest -cp &quot;$HOME/apps/junit/lib/*&quot;</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># Created by: Zemian Deng 03/09/2012</span>
</span><span class='line'>
</span><span class='line'><span class="c"># This run script dir (resolve to absolute path)</span>
</span><span class='line'><span class="nv">SCRIPT_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">cd</span> <span class="k">$(</span>dirname <span class="nv">$0</span><span class="k">)</span> <span class="o">&amp;&amp;</span> <span class="nb">pwd</span><span class="k">)</span>    <span class="c"># This dir is where this script live.</span>
</span><span class='line'><span class="nv">APP_DIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">cd</span> <span class="nv">$SCRIPT_DIR</span>/.. <span class="o">&amp;&amp;</span> <span class="nb">pwd</span><span class="k">)</span>      <span class="c"># Assume the application dir is one level up from script dir.</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Default parameters</span>
</span><span class='line'><span class="nv">JAVA_HOME</span><span class="o">=</span><span class="k">${</span><span class="nv">JAVA_HOME</span><span class="p">:=</span><span class="nv">$HOME</span><span class="p">/apps/jdk</span><span class="k">}</span>     <span class="c"># This is the home directory of Java development kit.</span>
</span><span class='line'><span class="nv">RUN_JAVA_CP</span><span class="o">=</span><span class="k">${</span><span class="nv">RUN_JAVA_CP</span><span class="p">:=</span><span class="nv">$CLASSPATH</span><span class="k">}</span>     <span class="c"># A classpath prefix before -classpath option, default to $CLASSPATH</span>
</span><span class='line'><span class="nv">RUN_JAVA_OPTS</span><span class="o">=</span><span class="k">${</span><span class="nv">RUN_JAVA_OPTS</span><span class="p">:=</span><span class="k">}</span>           <span class="c"># Java options (-Xmx512m -XX:MaxPermSize=128m etc)</span>
</span><span class='line'><span class="nv">RUN_JAVA_DEBUG</span><span class="o">=</span><span class="k">${</span><span class="nv">RUN_JAVA_DEBUG</span><span class="p">:=</span><span class="k">}</span>         <span class="c"># If not empty, print the full java command line before executing it.</span>
</span><span class='line'><span class="nv">RUN_JAVA_NO_PARSE</span><span class="o">=</span><span class="k">${</span><span class="nv">RUN_JAVA_NO_PARSE</span><span class="p">:=</span><span class="k">}</span>   <span class="c"># If not empty, skip the auto parsing of -D and -cp options from script arguments.</span>
</span><span class='line'><span class="nv">RUN_JAVA_NO_AUTOCP</span><span class="o">=</span><span class="k">${</span><span class="nv">RUN_JAVA_NO_AUTOCP</span><span class="p">:=</span><span class="k">}</span> <span class="c"># If not empty, do not auto setup Java classpath</span>
</span><span class='line'><span class="nv">RUN_JAVA_DRY</span><span class="o">=</span><span class="k">${</span><span class="nv">RUN_JAVA_DRY</span><span class="p">:=</span><span class="k">}</span>             <span class="c"># If not empty, do not exec Java command, but just print</span>
</span><span class='line'>
</span><span class='line'><span class="c"># OS specific support.  $var _must_ be set to either true or false.</span>
</span><span class='line'><span class="nv">CYGWIN</span><span class="o">=</span><span class="nb">false</span><span class="p">;</span>
</span><span class='line'><span class="k">case</span> <span class="s2">&quot;`uname`&quot;</span> in
</span><span class='line'>  CYGWIN*<span class="o">)</span> <span class="nv">CYGWIN</span><span class="o">=</span><span class="nb">true</span> <span class="p">;;</span>
</span><span class='line'><span class="k">esac</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Define where is the java executable is</span>
</span><span class='line'><span class="nv">JAVA_CMD</span><span class="o">=</span>java
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -d <span class="s2">&quot;$JAVA_HOME&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  <span class="nv">JAVA_CMD</span><span class="o">=</span><span class="s2">&quot;$JAVA_HOME/bin/java&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Auto setup applciation&#39;s Java Classpath (only if they exists)</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;$RUN_JAVA_NO_AUTOCP&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> -d <span class="s2">&quot;$APP_DIR/config&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nv">RUN_JAVA_CP</span><span class="o">=</span><span class="s2">&quot;$RUN_JAVA_CP:$APP_DIR/config&quot;</span> <span class="p">;</span> <span class="k">fi</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> -d <span class="s2">&quot;$APP_DIR/target/test-classes&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nv">RUN_JAVA_CP</span><span class="o">=</span><span class="s2">&quot;$RUN_JAVA_CP:$APP_DIR/target/test-classes&quot;</span> <span class="p">;</span> <span class="k">fi</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> -d <span class="s2">&quot;$APP_DIR/target/classes&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nv">RUN_JAVA_CP</span><span class="o">=</span><span class="s2">&quot;$RUN_JAVA_CP:$APP_DIR/target/classes&quot;</span> <span class="p">;</span> <span class="k">fi</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> -d <span class="s2">&quot;$APP_DIR/target/dependency&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nv">RUN_JAVA_CP</span><span class="o">=</span><span class="s2">&quot;$RUN_JAVA_CP:$APP_DIR/target/dependency/*&quot;</span> <span class="p">;</span> <span class="k">fi</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">[</span> -d <span class="s2">&quot;$APP_DIR/lib&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> <span class="nv">RUN_JAVA_CP</span><span class="o">=</span><span class="s2">&quot;$RUN_JAVA_CP:$APP_DIR/lib/*&quot;</span> <span class="p">;</span> <span class="k">fi</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="nv">ARGS</span><span class="o">=</span><span class="s2">&quot;$@&quot;</span>
</span><span class='line'><span class="c"># Parse addition &quot;-cp&quot; and &quot;-D&quot; after the Java main class from script arguments</span>
</span><span class='line'><span class="c">#   This is done for convenient sake so users do not have to export RUN_JAVA_CP and RUN_JAVA_OPTS</span>
</span><span class='line'><span class="c">#   saparately, but now they can pass into end of this run-java script instead.</span>
</span><span class='line'><span class="c">#   This can be disable by setting RUN_JAVA_NO_PARSE=1.</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;$RUN_JAVA_NO_PARSE&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  <span class="c"># Prepare variables for parsing</span>
</span><span class='line'>  <span class="nv">FOUND_CP</span><span class="o">=</span>
</span><span class='line'>  NEW_ARGS<span class="o">[</span>0<span class="o">]=</span><span class="s1">&#39;&#39;</span>
</span><span class='line'>  <span class="nv">IDX</span><span class="o">=</span>0
</span><span class='line'>
</span><span class='line'>  <span class="c"># Parse all arguments and look for &quot;-cp&quot; and &quot;-D&quot;</span>
</span><span class='line'>  <span class="k">for</span> ARG in <span class="s2">&quot;$@&quot;</span><span class="p">;</span> <span class="k">do</span>
</span><span class='line'>      <span class="k">if</span> <span class="o">[[</span> -n <span class="nv">$FOUND_CP</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>          <span class="nv">RUN_JAVA_CP</span><span class="o">=</span><span class="s2">&quot;$RUN_JAVA_CP:$ARG&quot;</span>
</span><span class='line'>          <span class="nv">FOUND_CP</span><span class="o">=</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>          <span class="k">case</span> <span class="nv">$ARG</span> in
</span><span class='line'>          <span class="s1">&#39;-cp&#39;</span><span class="o">)</span>
</span><span class='line'>              <span class="nv">FOUND_CP</span><span class="o">=</span>1
</span><span class='line'>              <span class="p">;;</span>
</span><span class='line'>          <span class="s1">&#39;-D&#39;</span>*<span class="o">)</span>
</span><span class='line'>              <span class="nv">RUN_JAVA_OPTS</span><span class="o">=</span><span class="s2">&quot;$RUN_JAVA_OPTS $ARG&quot;</span>
</span><span class='line'>              <span class="p">;;</span>
</span><span class='line'>          *<span class="o">)</span>
</span><span class='line'>              NEW_ARGS<span class="o">[</span><span class="nv">$IDX</span><span class="o">]=</span><span class="s2">&quot;$ARG&quot;</span>
</span><span class='line'>              <span class="nb">let </span><span class="nv">IDX</span><span class="o">=</span><span class="nv">$IDX</span>+1
</span><span class='line'>              <span class="p">;;</span>
</span><span class='line'>          <span class="k">esac</span>
</span><span class='line'>      <span class="k">fi</span>
</span><span class='line'>  <span class="k">done</span>
</span><span class='line'>  <span class="nv">ARGS</span><span class="o">=</span><span class="s2">&quot;${NEW_ARGS[@]}&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Convert Windows Java Classpath</span>
</span><span class='line'><span class="k">if</span> <span class="nv">$CYGWIN</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  <span class="nv">RUN_JAVA_CP</span><span class="o">=</span><span class="k">$(</span>cygpath -mp <span class="nv">$RUN_JAVA_CP</span><span class="k">)</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Display full Java command.</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -n <span class="s2">&quot;$RUN_JAVA_DEBUG&quot;</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> -n <span class="s2">&quot;$RUN_JAVA_DRY&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;$JAVA_CMD&quot;</span> <span class="nv">$RUN_JAVA_OPTS</span> -cp <span class="s2">&quot;$RUN_JAVA_CP&quot;</span> <span class="nv">$ARGS</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Run Java Main class</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;$RUN_JAVA_DRY&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  <span class="s2">&quot;$JAVA_CMD&quot;</span> <span class="nv">$RUN_JAVA_OPTS</span> -cp <span class="s2">&quot;$RUN_JAVA_CP&quot;</span> <span class="nv">$ARGS</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>The main idea is to run <code>mvn dependency:copy-dependencies</code>, this will generate all the jar files into <code>target/dependency</code> folder</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mvn dependency:copy-dependencies
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Scanning <span class="k">for</span> projects...
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Building sparkblog 1.0-SNAPSHOT
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span>
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> --- maven-dependency-plugin:2.1:copy-dependencies <span class="o">(</span>default-cli<span class="o">)</span> @ sparkblog ---
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying spark-core-2.1.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\s</span>park-core-2.1.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying jetty-http-9.0.2.v20130417.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>etty-http-9.0.2.v20130417.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying jetty-io-9.0.2.v20130417.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>etty-io-9.0.2.v20130417.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying jetty-security-9.0.2.v20130417.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>etty-security-9.0.2.v20130417.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying jetty-server-9.0.2.v20130417.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>etty-server-9.0.2.v20130417.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying jetty-servlet-9.0.2.v20130417.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>etty-servlet-9.0.2.v20130417.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying jetty-util-9.0.2.v20130417.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>etty-util-9.0.2.v20130417.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying jetty-webapp-9.0.2.v20130417.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>etty-webapp-9.0.2.v20130417.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying jetty-xml-9.0.2.v20130417.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>etty-xml-9.0.2.v20130417.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying javax.servlet-3.0.0.v201112011016.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\j</span>avax.servlet-3.0.0.v201112011016.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying slf4j-api-1.7.7.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\s</span>lf4j-api-1.7.7.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Copying slf4j-simple-1.7.7.jar to d:<span class="se">\M</span>yProjects<span class="se">\j</span>wrapper<span class="se">\b</span>loggg<span class="se">\s</span>parkblog<span class="se">\t</span>arget<span class="se">\d</span>ependency<span class="se">\s</span>lf4j-simple-1.7.7.jar
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> BUILD SUCCESS
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Total <span class="nb">time</span>: 2.978s
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Finished at: Thu Feb <span class="m">12</span> 18:22:54 EET 2015
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> Final Memory: 9M/243M
</span><span class='line'><span class="o">[</span>INFO<span class="o">]</span> ------------------------------------------------------------------------
</span></code></pre></td></tr></table></div></figure>


<p>Now, we can reuse the provided <em>above</em> script <strong>or</strong> use the provided <em>below</em> one-liner:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>java -cp target<span class="se">\c</span>lasses<span class="p">;</span>target<span class="se">\d</span>ependency<span class="se">\*</span> com.halyph.blog.App <span class="m">9090</span> one <span class="m">1</span> 2
</span></code></pre></td></tr></table></div></figure>


<p>This one-liner is very simple and can be transformed to shell/batch scripts depending on the level of re-use you&rsquo;d like to implement.</p>

<ul>
<li>Now, it&rsquo;s time to created pre-packed application bundle which can be easily distributed. We will use <a href="http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/usage-program.html">Maven Application Assembler Plugin</a>:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'> <span class="nt">&lt;build&gt;</span>
</span><span class='line'>    <span class="nt">&lt;plugins&gt;</span>
</span><span class='line'>     ...
</span><span class='line'>      <span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;artifactId&gt;</span>appassembler-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>        <span class="nt">&lt;version&gt;</span>1.9<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>        <span class="c">&lt;!--</span>
</span><span class='line'><span class="c">        This (executions) section can be omitted.</span>
</span><span class='line'><span class="c">        In case it&#39;s omitted we should call the next command to generate wrapper:</span>
</span><span class='line'><span class="c">        mvn package appassembler:assemble</span>
</span><span class='line'><span class="c">        --&gt;</span>
</span><span class='line'>        <span class="nt">&lt;executions&gt;</span>
</span><span class='line'>          <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>            <span class="nt">&lt;phase&gt;</span>package<span class="nt">&lt;/phase&gt;</span>
</span><span class='line'>            <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>              <span class="nt">&lt;goal&gt;</span>assemble<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/executions&gt;</span>
</span><span class='line'>        <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>          <span class="nt">&lt;programs&gt;</span>
</span><span class='line'>            <span class="nt">&lt;program&gt;</span>
</span><span class='line'>              <span class="nt">&lt;mainClass&gt;</span>com.halyph.blog.App<span class="nt">&lt;/mainClass&gt;</span>
</span><span class='line'>              <span class="nt">&lt;id&gt;</span>app<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/program&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/programs&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/plugin&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/plugins&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/build&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>The Application Assembler Plugin is a Maven plugin for generating scripts for starting java applications. All dependencies and the artifact of the project itself are placed in a generated Maven repository in a defined assemble directory. All artifacts (dependencies + the artifact from the project) are added to the classpath in the generated bin scripts.</p></blockquote>

<p><a href="http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/usage-program.html">Maven Application Assembler Plugin</a> usage:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>mvn package
</span><span class='line'><span class="nv">$ </span>target/appassembler/bin/app
</span></code></pre></td></tr></table></div></figure>


<blockquote><ul>
<li><p>All dependencies and the artifact itself are placed in the defined assemble directory (defaults to <code>$project.build.directory/appassembler</code>).</p></li>
<li><p>A <code>bin/</code> directory is created in the assemble directory and the generated bin scripts are placed in that directory (defaults to both unix shell scripts and Windows bat files).</p></li>
</ul>
</blockquote>

<p>Note: <a href="http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/usage-program.html">Maven Application Assembler Plugin</a> have a lot of customization options, just check the documentation.</p>

<h2>Summary</h2>

<p>Here was shown that using such tool as Maven you can be productive and &ldquo;agile&rdquo; (use <a href="http://gradle.org">Gradle</a> if you&rsquo;d like to be in trend):</p>

<ul>
<li>generate project skeleton from scratch</li>
<li>open it in IDE without ceremony</li>
<li>call the app via Maven plugin</li>
<li>call it as plain CLI application, but with small ceremony (need to run <em>dependency:copy-dependencies</em>)</li>
<li>package the app for further distribution</li>
</ul>


<p>Yes, it&rsquo;s not a simple <em>write-one</em> Java &ldquo;script&rdquo;, but it&rsquo;s flexible enough to feel like it is.</p>

<h2>References</h2>

<ul>
<li><a href="/blog/2015/02/13/do-we-need-java-for-everything">Do We Need Java for Everything?</a></li>
<li><a href="http://saltnlight5.blogspot.com/2012/08/a-better-java-shell-script-wrapper.html">A better java shell script wrapper</a></li>
<li><a href="http://mojo.codehaus.org/exec-maven-plugin/usage.html">Exec Maven Plugin</a></li>
<li><a href="http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/usage-program.html">Maven Application Assembler Plugin</a></li>
<li><a href="http://blog.plesslweb.ch/post/6628462331/wrapper-script-for-java-command-line-applications">Wrapper Script for Java Command-Line Applications</a></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p> <img class="left" src="/images/blog.jpeg">
 Orest Ivasiv <br />Software Engineer</p>
  <br />
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/02/17/how-to-install-octopress-on-windows/">How to Install Octopress on Windows?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/13/maven-flow-for-simple-app-creation/">Maven Flow for Simple App Creation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/13/do-we-need-java-for-everything/">Do We Need Java for Everything?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/05/how-to-generate-permgen/">How to Generate PermGen Leak?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/02/scripting-in-scala/">Scripting in Scala</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
    <span id="tag-cloud"><a href='/blog/categories/bash' style='font-size: 124.0%'>bash(2)</a> <a href='/blog/categories/blog' style='font-size: 112.0%'>blog(1)</a> <a href='/blog/categories/books' style='font-size: 124.0%'>books(2)</a> <a href='/blog/categories/conference' style='font-size: 112.0%'>conference(1)</a> <a href='/blog/categories/groovy' style='font-size: 136.0%'>groovy(3)</a> <a href='/blog/categories/h2' style='font-size: 112.0%'>h2(1)</a> <a href='/blog/categories/java' style='font-size: 160.0%'>java(5)</a> <a href='/blog/categories/java-se' style='font-size: 124.0%'>java se(2)</a> <a href='/blog/categories/jdbc' style='font-size: 112.0%'>jdbc(1)</a> <a href='/blog/categories/jeeconf' style='font-size: 112.0%'>jeeconf(1)</a> <a href='/blog/categories/languages' style='font-size: 112.0%'>languages(1)</a> <a href='/blog/categories/learning' style='font-size: 112.0%'>learning(1)</a> <a href='/blog/categories/maven' style='font-size: 112.0%'>maven(1)</a> <a href='/blog/categories/octopress' style='font-size: 124.0%'>octopress(2)</a> <a href='/blog/categories/review' style='font-size: 124.0%'>review(2)</a> <a href='/blog/categories/ruby' style='font-size: 124.0%'>ruby(2)</a> <a href='/blog/categories/scala' style='font-size: 112.0%'>scala(1)</a> <a href='/blog/categories/scripting' style='font-size: 112.0%'>scripting(1)</a> <a href='/blog/categories/shell' style='font-size: 124.0%'>shell(2)</a> <a href='/blog/categories/textmate' style='font-size: 124.0%'>textmate(2)</a> <a href='/blog/categories/tomcat' style='font-size: 112.0%'>tomcat(1)</a> <a href='/blog/categories/windows' style='font-size: 112.0%'>windows(1)</a> </span>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Orest Ivasiv -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'kie-by-halyph';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
